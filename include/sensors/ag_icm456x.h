/**-------------------------------------------------------------------------
@file	ag_icm456x.h

@brief	TDK Invensen ICM456x series accel gyro implementation

This file implements only accel & gyro part of the ICM456x. IMU features are
implemented in imu implementation file.


@author	Hoang Nguyen Hoan
@date	Mar. 9, 2025

@license

MIT License

Copyright (c) 2025, I-SYST inc., all rights reserved

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

----------------------------------------------------------------------------*/
#ifndef __AG_ICM456X_H__
#define __AG_ICM456X_H__

#include <stdint.h>

#include "coredev/iopincfg.h"
#include "sensors/accel_sensor.h"
#include "sensors/gyro_sensor.h"
#include "sensors/temp_sensor.h"

/** @addtogroup Sensors
  * @{
  */

#define ICM456X_I2C_7BITS_DEVADDR0							0x68
#define ICM456X_I2C_7BITS_DEVADDR1							0x69

#define ICM456X_CHIP_ID_REG							0x72

#define ICM456X_CHIP_ID										0xE9

#define ICM456X_BASE_ADDRESS_IMEM_SRAM			0
#define ICM456X_BASE_ADDRESS_IPREG_BAR			0xA000
#define ICM456X_BASE_ADDRESS_IPREG_TOP1			0xA200
#define ICM456X_BASE_ADDRESS_IPREG_SYS1			0xA400
#define ICM456X_BASE_ADDRESS_IPREG_SYS2			0xA500

// USER BANK 0 REGISTER MAP

#define ICM456X_ACCEL_DATA_X1_UI_REG				0x0
#define ICM456X_ACCEL_DATA_X0_UI_REG				0x1
#define ICM456X_ACCEL_DATA_Y1_UI_REG				0x2
#define ICM456X_ACCEL_DATA_Y0_UI_REG				0x3
#define ICM456X_ACCEL_DATA_Z1_UI_REG				0x4
#define ICM456X_ACCEL_DATA_Z0_UI_REG				0x5

#define ICM456X_GYRO_DATA_X1_UI_REG					0x6
#define ICM456X_GYRO_DATA_X0_UI_REG					0x7
#define ICM456X_GYRO_DATA_Y1_UI_REG					0x8
#define ICM456X_GYRO_DATA_Y0_UI_REG					0x9
#define ICM456X_GYRO_DATA_Z1_UI_REG					0xA
#define ICM456X_GYRO_DATA_Z0_UI_REG					0xB

#define ICM456X_TEMP_DATA1_UI_REG					0xC
#define ICM456X_TEMP_DATA0_UI_REG					0xD

#define ICM456X_TMST_FSYNCH_REG						0xE
#define ICM456X_TMST_FSYNCL_REG						0xF

#define ICM456X_PWR_MGMT0_REG						0x10
#define ICM456X_PWR_MGMT0_ACCEL_MODE_MASK								(3<<0)
#define ICM456X_PWR_MGMT0_ACCEL_MODE_OFF								(0<<0)
#define ICM456X_PWR_MGMT0_ACCEL_MODE_STDBY								(1<<0)	//!< Stdby mode, accel is off
#define ICM456X_PWR_MGMT0_ACCEL_MODE_LOW_PWR							(2<<0)	//!<
#define ICM456X_PWR_MGMT0_ACCEL_MODE_LOW_NOISE							(3<<0)
#define ICM456X_PWR_MGMT0_GYRO_MODE_MASK								(3<<2)
#define ICM456X_PWR_MGMT0_GYRO_MODE_OFF									(0<<2)
#define ICM456X_PWR_MGMT0_GYRO_MODE_STDBY								(1<<2)	//!< Standby
#define ICM456X_PWR_MGMT0_GYRO_MODE_LOW_PWR								(2<<2)
#define ICM456X_PWR_MGMT0_GYRO_MODE_LOW_NOISE							(3<<2)



#define ICM456X_FIFO_COUNT_0_REG					0x12
#define ICM456X_FIFO_COUNT_1_REG					0x13

#define ICM456X_FIFO_DATA_REG						0x14

#define ICM456X_INT1_CONFIG0_REG					0x16
#define ICM456X_INT1_CONFIG0_FIFO_FULL_EN								(1<<0)	//!<
#define ICM456X_INT1_CONFIG0_FIFO_THRS_EN								(1<<1)
#define ICM456X_INT1_CONFIG0_DRDY_EN									(1<<2)
#define ICM456X_INT1_CONFIG0_AUX1_DRDY_EN								(1<<3)
#define ICM456X_INT1_CONFIG0_AP_FSYNC_EN								(1<<4)
#define ICM456X_INT1_CONFIG0_AP_AGC_RDY_EN								(1<<5)
#define ICM456X_INT1_CONFIG0_AUX1_AGC_RDY_EN							(1<<6)
#define ICM456X_INT1_CONFIG0_RESET_DONE_EN								(1<<7)

#define ICM456X_INT1_CONFIG1_REG					0x17
#define ICM456X_INT1_CONFIG1_PLL_RDY_EN									(1<<0)
#define ICM456X_INT1_CONFIG1_WOM_X_EN									(1<<1)	//!<
#define ICM456X_INT1_CONFIG1_WOM_Y_EN									(1<<2)
#define ICM456X_INT1_CONFIG1_WOM_Z_EN									(1<<3)
#define ICM456X_INT1_CONFIG1_I3C_PROTOCOL_ERR_EN						(1<<4)
#define ICM456X_INT1_CONFIG1_I2CM_DONE_EN								(1<<5)
#define ICM456X_INT1_CONFIG1_APEX_EVENT_EN								(1<<6)

#define ICM456X_INT1_CONFIG2_REG					0x18
#define ICM456X_INT1_CONFIG2_POLARITY_HIGH								(1<<0)
#define ICM456X_INT1_CONFIG2_MODE_LATCH									(1<<1)	//!<
#define ICM456X_INT1_CONFIG2_DRIVE_OPEN_DRAIN							(1<<2)

#define ICM456X_INT1_STATUS0_REG					0x19
#define ICM456X_INT1_STATUS0_FIFO_FULL									(1<<0)
#define ICM456X_INT1_STATUS0_FIFO_THS									(1<<1)
#define ICM456X_INT1_STATUS0_DRDY										(1<<2)
#define ICM456X_INT1_STATUS0_AUX1_DRDY									(1<<3)
#define ICM456X_INT1_STATUS0_AP_FSYNC									(1<<4)
#define ICM456X_INT1_STATUS0_AP_AGC_RD									(1<<5)
#define ICM456X_INT1_STATUS0_AUX1_AGC_RDY								(1<<6)
#define ICM456X_INT1_STATUS0_RESET_DONE									(1<<7)

#define ICM456X_INT1_STATUS1_REG					0x1A
#define ICM456X_INT1_STATUS1_PLL_RDY									(1<<0)
#define ICM456X_INT1_STATUS1_WOM_X										(1<<1)
#define ICM456X_INT1_STATUS1_WOM_Y										(1<<2)
#define ICM456X_INT1_STATUS1_WOM_Z										(1<<3)
#define ICM456X_INT1_STATUS1_I3C_PROTOCOL_ERR							(1<<4)
#define ICM456X_INT1_STATUS1_I2CM_DONE									(1<<5)
#define ICM456X_INT1_STATUS1_APEX_EVENT									(1<<6)

#define ICM456X_ACCEL_CONFIG0_REG					0x1B
#define ICM456X_ACCEL_CONFIG0_ODR_MASK									(0xF<<0)
#define ICM456X_ACCEL_CONFIG0_ODR_6400									(3<<0)	//!< 6.4KHz LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_3200									(4<<0)	//!< 3.2KHz LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_1600									(5<<0)	//!< 1.6KHz LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_800									(6<<0)	//!< 800Hz LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_400									(7<<0)	//!< 400Hz LP or LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_200									(8<<0)	//!< 200Hz LP or LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_100									(9<<0)	//!< 100Hz LP or LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_50									(10<<0)	//!< 50Hz LP or LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_25									(11<<0)	//!< 25Hz LP or LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_12_5									(12<<0)	//!< 12.5Hz LP or LN mode
#define ICM456X_ACCEL_CONFIG0_ODR_6_25									(13<<0)	//!< 6.25Hz LP mode
#define ICM456X_ACCEL_CONFIG0_ODR_3_125									(14<<0)	//!< 3.125Hz LP mode
#define ICM456X_ACCEL_CONFIG0_ODR_1_6525								(15<<0)	//!< 1.6525Hz LP mode
#define ICM456X_ACCEL_CONFIG0_UI_FS_SEL_MASK							(7<<4)
#define ICM456X_ACCEL_CONFIG0_UI_FS_SEL_32G								(0<<4)
#define ICM456X_ACCEL_CONFIG0_UI_FS_SEL_16G								(1<<4)
#define ICM456X_ACCEL_CONFIG0_UI_FS_SEL_8G								(2<<4)
#define ICM456X_ACCEL_CONFIG0_UI_FS_SEL_4G								(3<<4)
#define ICM456X_ACCEL_CONFIG0_UI_FS_SEL_2G								(4<<4)

#define ICM456X_GYRO_CONFIG0_REG					0x1C
#define ICM456X_GYRO_CONFIG0_ODR_MASK									(0xF<<0)
#define ICM456X_GYRO_CONFIG0_ODR_6400									(3<<0)	//!< 6.4KHz LN mode
#define ICM456X_GYRO_CONFIG0_ODR_3200									(4<<0)	//!< 3.2KHz LN mode
#define ICM456X_GYRO_CONFIG0_ODR_1600									(5<<0)	//!< 1.6KHz LN mode
#define ICM456X_GYRO_CONFIG0_ODR_800									(6<<0)	//!< 800Hz LN mode
#define ICM456X_GYRO_CONFIG0_ODR_400									(7<<0)	//!< 400Hz LP or LN mode
#define ICM456X_GYRO_CONFIG0_ODR_200									(8<<0)	//!< 200Hz LP or LN mode
#define ICM456X_GYRO_CONFIG0_ODR_100									(9<<0)	//!< 100Hz LP or LN mode
#define ICM456X_GYRO_CONFIG0_ODR_50										(10<<0)	//!< 50Hz LP or LN mode
#define ICM456X_GYRO_CONFIG0_ODR_25										(11<<0)	//!< 25Hz LP or LN mode
#define ICM456X_GYRO_CONFIG0_ODR_12_5									(12<<0)	//!< 12.5Hz LP or LN mode
#define ICM456X_GYRO_CONFIG0_ODR_6_25									(13<<0)	//!< 6.25Hz LP mode
#define ICM456X_GYRO_CONFIG0_ODR_3_125									(14<<0)	//!< 3.125Hz LP mode
#define ICM456X_GYRO_CONFIG0_ODR_1_6525									(15<<0)	//!< 1.6525Hz LP mode
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_MASK								(0xF<<4)
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_4000								(0<<4)	//!< 4000dps
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_2000								(1<<4)	//!< 2000dps
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_1000								(2<<4)
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_500								(3<<4)
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_250								(4<<4)
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_125								(5<<4)
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_62_5								(6<<4)	//!< 62.5dps
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_31_25							(7<<4)	//!< 31.25dps
#define ICM456X_GYRO_CONFIG0_UI_FS_SEL_15_625							(8<<4)	//!< 15.625dps

#define ICM456X_FIFO_CONFIG0_REG					0x1D
#define ICM456X_FIFO_CONFIG0_DEPTH_MASK									(0x3F<<0)
#define ICM456X_FIFO_CONFIG0_DEPTH_2K									(7<<0)	//!< Recommended
#define ICM456X_FIFO_CONFIG0_DEPTH_8K									(0x1F<<0)
#define ICM456X_FIFO_CONFIG0_MODE_MASK									(3<<6)
#define ICM456X_FIFO_CONFIG0_MODE_DIS									(0<<6)	//!< Disable
#define ICM456X_FIFO_CONFIG0_MODE_STREAM								(1<<6)
#define ICM456X_FIFO_CONFIG0_MODE_STOP_FULL								(2<<6)	//!< Stop on full

#define ICM456X_FIFO_CONFIG1_0_REG					0x1E
#define ICM456X_FIFO_CONFIG1_0_WM_TH_MASK								(0xFF<<0)

#define ICM456X_FIFO_CONFIG1_1_REG					0x1F
#define ICM456X_FIFO_CONFIG1_1_WM_TH_MASK								(0xFF<<0)

#define ICM456X_FIFO_CONFIG2_REG					0x20
#define ICM456X_FIFO_CONFIG2_WR_WM_GT_TH								(1<<3)
#define ICM456X_FIFO_CONFIG2_FLUSH										(1<<7)

#define ICM456X_FIFO_CONFIG3_REG					0x21
#define ICM456X_FIFO_CONFIG3_IF_EN										(1<<0)
#define ICM456X_FIFO_CONFIG3_ACCEL_EN									(1<<1)
#define ICM456X_FIFO_CONFIG3_GYRO_EN									(1<<2)
#define ICM456X_FIFO_CONFIG3_HIRES_EN									(1<<3)
#define ICM456X_FIFO_CONFIG3_ES0_EN										(1<<4)
#define ICM456X_FIFO_CONFIG3_ES1_EN										(1<<5)

#define ICM456X_FIFO_CONFIG4_REG					0x22
#define ICM456X_FIFO_CONFIG4_ES0_6B										(0<<0)
#define ICM456X_FIFO_CONFIG4_ES0_9B										(1<<0)
#define ICM456X_FIFO_CONFIG4_TMST_FSYNC_EN								(1<<1)
#define ICM456X_FIFO_CONFIG4_COMP_EN									(1<<2)	//!< Compression enable
#define ICM456X_FIFO_CONFIG4_COMP_NC_FLOW_CFG_MASK						(7<<3)	//!<
#define ICM456X_FIFO_CONFIG4_COMP_NC_FLOW_CFG_DIS						(0<<3)	//!< No compression
#define ICM456X_FIFO_CONFIG4_COMP_NC_FLOW_CFG_8_FRAME					(1<<3)	//!< No compression packet every 8 frames
#define ICM456X_FIFO_CONFIG4_COMP_NC_FLOW_CFG_16_FRAME					(2<<3)	//!< No compression
#define ICM456X_FIFO_CONFIG4_COMP_NC_FLOW_CFG_32_FRAME					(3<<3)	//!< No compression
#define ICM456X_FIFO_CONFIG4_COMP_NC_FLOW_CFG_64_FRAME					(4<<3)	//!< No compression
#define ICM456X_FIFO_CONFIG4_COMP_NC_FLOW_CFG_128_FRAME					(5<<3)	//!< No compression

#define ICM456X_TMST_WOM_CONFIG_REG					0x23
#define ICM456X_TMST_WOM_CONFIG_WOM_INT_DUR_MASK						(3<<0)
#define ICM456X_TMST_WOM_CONFIG_WOM_INT_DUR_FIRST						(0<<0)
#define ICM456X_TMST_WOM_CONFIG_WOM_INT_DUR_SECOND						(1<<0)
#define ICM456X_TMST_WOM_CONFIG_WOM_INT_DUR_THIRD						(2<<0)
#define ICM456X_TMST_WOM_CONFIG_WOM_INT_DUR_FORTH						(3<<0)
#define ICM456X_TMST_WOM_CONFIG_WOM_INT_EN								(1<<2)
#define ICM456X_TMST_WOM_CONFIG_WOM_MODE_CMP							(1<<3)
#define ICM456X_TMST_WOM_CONFIG_WOM_EN									(1<<4)
#define ICM456X_TMST_WOM_CONFIG_TMST_RESOL_1US							(0<<5)	//!< Timestamp resolution 1us
#define ICM456X_TMST_WOM_CONFIG_TMST_RESOL_16US							(1<<5)
#define ICM456X_TMST_WOM_CONFIG_TMST_DELTA_EN							(1<<6)

#define ICM456X_FSYNC_CONFIG0_REG					0x24
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_SEL_MASK							(7<<0)
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_FLAG_DIS							(0<<0)	//!< FSYNC tagging is disabled
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_FLAG_TEMP_DATA_UI_LSB			(1<<0)
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_FLAG_GYRO_DATA_X_UI_LSB			(2<<0)
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_FLAG_GYRO_DATA_Y_UI_LSB			(3<<0)
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_FLAG_GYRO_DATA_Z_UI_LSB			(4<<0)
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_FLAG_ACCEL_DATA_X_UI_LSB			(5<<0)
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_FLAG_ACCEL_DATA_Y_UI_LSB			(6<<0)
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_FLAG_ACCEL_DATA_Z_UI_LSB			(7<<0)
#define ICM456X_FSYNC_CONFIG0_AP_FSYNC_FLAG_CLEAR_READ					(1<<3)

#define ICM456X_FSYNC_CONFIG1_REG					0x25
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_SEL_MASK						(7<<0)
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_FLAG_DIS						(0<<0)	//!< FSYNC tagging is disabled
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_FLAG_TEMP_DATA_UI_LSB			(1<<0)
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_FLAG_GYRO_DATA_X_UI_LSB		(2<<0)
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_FLAG_GYRO_DATA_Y_UI_LSB		(3<<0)
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_FLAG_GYRO_DATA_Z_UI_LSB		(4<<0)
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_FLAG_ACCEL_DATA_X_UI_LSB		(5<<0)
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_FLAG_ACCEL_DATA_Y_UI_LSB		(6<<0)
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_FLAG_ACCEL_DATA_Z_UI_LSB		(7<<0)
#define ICM456X_FSYNC_CONFIG1_AUX1_FSYNC_FLAG_CLEAR_READ				(1<<3)

#define ICM456X_RTC_CONFIG_REG						0x26
#define ICM456X_RTC_CONFIG_EN											(1<<5)
#define ICM456X_RTC_CONFIG_ALIGN 										(1<<6)	//!< Re-align command is generated by writing 1 to this bit.

#define ICM456X_DMP_EXT_SEN_ODR_CFG_REG		0x27
#define ICM456X_DMP_EXT_SEN_ODR_CFG_APEX_ODR_MASK						(7<<0)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_APEX_ODR_25HZ						(0<<0)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_APEX_ODR_50HZ						(1<<0)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_APEX_ODR_100HZ						(2<<0)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_APEX_ODR_200HZ						(3<<0)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_APEX_ODR_400HZ						(4<<0)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_APEX_ODR_800HZ						(5<<0)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_ODR_MASK						(7<<3)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_ODR_3_125HZ						(0<<3)	//!< 3.125Hz
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_ODR_6_25HZ						(1<<3)	//!< 6.25Hz
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_ODR_12_5HZ						(2<<3)	//!< 12.5Hz
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_ODR_25HZ						(3<<3)	//!< 25Hz
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_ODR_50HZ						(4<<3)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_ODR_100HZ						(5<<3)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_ODR_200HZ						(6<<3)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_ODR_400HZ						(7<<3)
#define ICM456X_DMP_EXT_SEN_ODR_CFG_EXT_SENSOR_EVT_EN					(1<<6)

#define ICM456X_ODR_DECIMATE_CONFIG_REG				0x28
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_MASK				(0xF<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_1				(0<<0)	//!< Sensor ODR
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_2				(1<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_4				(2<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_8				(3<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_16				(4<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_32				(5<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_64				(6<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_128				(7<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_256				(8<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_512				(9<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_1024				(10<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_2048				(11<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_ACCEL_FIFO_ODR_DEC_4096				(12<<0)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_MASK				(0xF<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_1					(0<<4)	//!< Sensor ODR
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_2					(1<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_4					(2<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_8					(3<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_16				(4<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_32				(5<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_64				(6<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_128				(7<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_256				(8<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_512				(9<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_1024				(10<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_2048				(11<<4)
#define ICM456X_ODR_DECIMATE_CONFIG_GYRO_FIFO_ODR_DEC_4096				(12<<4)

#define ICM456X_EDMP_APEX_EN0_REG					0x29
#define ICM456X_EDMP_APEX_EN0_TAP_EN									(1<<0)
#define ICM456X_EDMP_APEX_EN0_TILT_EN									(1<<3)
#define ICM456X_EDMP_APEX_EN0_PEDO_EN 									(1<<4)
#define ICM456X_EDMP_APEX_EN0_FF_EN										(1<<5)	//!< Free fall enable
#define ICM456X_EDMP_APEX_EN0_R2W_EN									(1<<6)
#define ICM456X_EDMP_APEX_EN0_SMD_EN									(1<<7)

#define ICM456X_EDMP_APEX_EN1_REG					0x2A
#define ICM456X_EDMP_APEX_EN1_SOFT_HARD_IRON_CORR_EN					(1<<0)
#define ICM456X_EDMP_APEX_EN1_INIT_EN 									(1<<1)	//!<
#define ICM456X_EDMP_APEX_EN1_POWER_SAVE_EN								(1<<2)
#define ICM456X_EDMP_APEX_EN1_FEATURE3_EN								(1<<5)
#define ICM456X_EDMP_APEX_EN1_EDMP_ENABLE								(1<<6)

#define ICM456X_APEX_BUFFER_MGMT_REG				0x2B
#define ICM456X_APEX_BUFFER_MGMT_STEP_COUNT_EDMP_WPTR_MASK				(3<<0)
#define ICM456X_APEX_BUFFER_MGMT_STEP_COUNT_HOST_RPTR_MASK				(3<<2)
#define ICM456X_APEX_BUFFER_MGMT_FF_DURATION_EDMP_WPTR_MASK				(3<<4)
#define ICM456X_APEX_BUFFER_MGMT_FF_DURATION_HOST_RPTR_MASK				(3<<6)

#define ICM456X_INTF_CONFIG0_REG					0x2C
#define ICM456X_INTF_CONFIG0_AP_SPI_MODE_0_3							(0<<0)
#define ICM456X_INTF_CONFIG0_AP_SPI_MODE_1_2							(1<<0)
#define ICM456X_INTF_CONFIG0_AP_SPI_3WIRE_MODE							(0<<1)
#define ICM456X_INTF_CONFIG0_AP_SPI_4WIRE_MODE							(1<<1)
#define ICM456X_INTF_CONFIG0_VIRTUAL_ACCESS_AUX1_EN						(1<<5)

#define ICM456X_INTF_CONFIG1_OVRD_REG				0x2D
#define ICM456X_INTF_CONFIG1_OVRD_AP_SPI_MODE_OVRD_0_3					(0<<0)
#define ICM456X_INTF_CONFIG1_OVRD_AP_SPI_MODE_OVRD_1_2					(1<<0)
#define ICM456X_INTF_CONFIG1_OVRD_AP_SPI_MODE_OVRD_EN					(1<<1)
#define ICM456X_INTF_CONFIG1_OVRD_AP_SPI_3_MODE_OVRD					(0<<2)	//!< SPI 3 wires
#define ICM456X_INTF_CONFIG1_OVRD_AP_SPI_4_MODE_OVRD					(1<<2)	//!< SPI 3 wires
#define ICM456X_INTF_CONFIG1_OVRD_AP_SPI_34_MODE_OVRD_EN				(1<<3)

#define ICM456X_INTF_AUX_CONFIG_REG					0x2E
#define ICM456X_INTF_AUX_CONFIG_AUX1_SPI_MODE_0_3						(0<<0)
#define ICM456X_INTF_AUX_CONFIG_AUX1_SPI_MODE_1_2						(1<<0)
#define ICM456X_INTF_AUX_CONFIG_AUX1_SPI_MODE_3WIRE						(0<<1)
#define ICM456X_INTF_AUX_CONFIG_AUX1_SPI_MODE_4WIRE						(1<<1)

#define ICM456X_IOC_PAD_SCENARIO_REG				0x2F
#define ICM456X_IOC_PAD_SCENARIO_AUX1_ENABLE							(1<<0)
#define ICM456X_IOC_PAD_SCENARIO_AUX1_MODE_MASK							(3<<1)
#define ICM456X_IOC_PAD_SCENARIO_AUX1_MODE_SPI							(0<<1)
#define ICM456X_IOC_PAD_SCENARIO_AUX1_MODE_I2C							(1<<1)
#define ICM456X_IOC_PAD_SCENARIO_AUX1_MODE_I2C_BYPASS					(2<<1)

// ???
#define ICM456X_IOC_PAD_SCENARIO_AUX_OVRD_REG		0x30
#define ICM456X_IOC_PAD_SCENARIO_AUX_OVRD_AUX1_EN						(1<<0)

#define ICM456X_DRIVE_CONFIG0_REG					0x32
#define ICM456X_DRIVE_CONFIG0_PADS_SPI_SLEW_MASK						(7<<1)
#define ICM456X_DRIVE_CONFIG0_PADS_SPI_SLEW_38							(0<<1)	//!< Min 12ns, max 106ns, typical 38
#define ICM456X_DRIVE_CONFIG0_PADS_SPI_SLEW_14							(1<<1)	//!< Min 4ns, max 45ns, typical 14
#define ICM456X_DRIVE_CONFIG0_PADS_SPI_SLEW_10							(2<<1)
#define ICM456X_DRIVE_CONFIG0_PADS_SPI_SLEW_7							(3<<1)
#define ICM456X_DRIVE_CONFIG0_PADS_SPI_SLEW_5							(4<<1)
#define ICM456X_DRIVE_CONFIG0_PADS_SPI_SLEW_4							(5<<1)
#define ICM456X_DRIVE_CONFIG0_PADS_SPI_SLEW_0_5							(6<<1)	//!< Min 0.1ns, max 6ns, typical 0.5
#define ICM456X_DRIVE_CONFIG0_PADS_I2C_SLEW_MASK						(7<<4)
#define ICM456X_DRIVE_CONFIG0_PADS_I2C_SLEW_20							(0<<4)	//!< Min 3ns, max 136ns, typical 20
#define ICM456X_DRIVE_CONFIG0_PADS_I2C_SLEW_7							(2<<4)	//!< Min sns, max 84ns, typical 7

#define ICM456X_DRIVE_CONFIG1_REG					0x33
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_SDR_SLEW_MASK					(7<<0)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_SDR_SLEW_38						(0<<0)	//!< Min 12ns, max 106ns, typical 38
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_SDR_SLEW_14						(1<<0)	//!< Min 4ns, max 45ns, typical 14
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_SDR_SLEW_10						(2<<0)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_SDR_SLEW_7						(3<<0)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_SDR_SLEW_5						(4<<0)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_SDR_SLEW_4						(5<<0)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_SDR_SLEW_0_5						(6<<0)	//!< Min 0.1ns, max 6ns, typical 0.5
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_DDR_SLEW_MASK					(7<<3)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_DDR_SLEW_38						(0<<3)	//!< Min 12ns, max 106ns, typical 38
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_DDR_SLEW_14						(1<<3)	//!< Min 4ns, max 45ns, typical 14
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_DDR_SLEW_10						(2<<3)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_DDR_SLEW_7						(3<<3)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_DDR_SLEW_5						(4<<3)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_DDR_SLEW_4						(5<<3)
#define ICM456X_DRIVE_CONFIG1_PADS_I3C_DDR_SLEW_0_5						(6<<3)	//!< Min 0.1ns, max 6ns, typical 0.5

#define ICM456X_DRIVE_CONFIG2_REG					0x34
#define ICM456X_DRIVE_CONFIG2_PADS_SLEW_MASK							(7<<0)
#define ICM456X_DRIVE_CONFIG2_PADS_SLEW_38								(0<<0)	//!< Min 12ns, max 106ns, typical 38
#define ICM456X_DRIVE_CONFIG2_PADS_SLEW_14								(1<<0)	//!< Min 4ns, max 45ns, typical 14
#define ICM456X_DRIVE_CONFIG2_PADS_SLEW_10								(2<<0)
#define ICM456X_DRIVE_CONFIG2_PADS_SLEW_7								(3<<0)
#define ICM456X_DRIVE_CONFIG2_PADS_SLEW_5								(4<<0)
#define ICM456X_DRIVE_CONFIG2_PADS_SLEW_4								(5<<0)
#define ICM456X_DRIVE_CONFIG2_PADS_SLEW_0_5								(6<<0)	//!< Min 0.1ns, max 6ns, typical 0.5

#define ICM456X_REG_MISC1_REG						0x35
#define ICM456X_REG_MISC1_OSC_ID_OVRD_MASK								(0xF<<0)
#define ICM456X_REG_MISC1_OSC_ID_OVRD_MCLK_INTERNAL						(0<<0)
#define ICM456X_REG_MISC1_OSC_ID_OVRD_INTERNAL_OSC						(2<<0)
#define ICM456X_REG_MISC1_OSC_ID_OVRD_EXTERNAL_CLOCK					(8<<0)

#define ICM456X_INT_APEX_CONFIG0_REG				0x39
#define ICM456X_INT_APEX_CONFIG0_INT_STATUS_MASK_PIN_TAP_DET			(1<<0)
#define ICM456X_INT_APEX_CONFIG0_INT_STATUS_MASK_PIN_HIGH_G_DET			(1<<1)
#define ICM456X_INT_APEX_CONFIG0_INT_STATUS_MASK_PIN_LOW_G_DET			(1<<2)
#define ICM456X_INT_APEX_CONFIG0_INT_STATUS_MASK_PIN_TILT_DET			(1<<3)
#define ICM456X_INT_APEX_CONFIG0_INT_STATUS_MASK_PIN_STEP_CNT_OVFL		(1<<4)
#define ICM456X_INT_APEX_CONFIG0_INT_STATUS_MASK_PIN_STEP_DET			(1<<5)
#define ICM456X_INT_APEX_CONFIG0_INT_STATUS_MASK_PIN_FF_DET				(1<<6)
#define ICM456X_INT_APEX_CONFIG0_INT_STATUS_MASK_PIN_R2W_WAKE_DET		(1<<7)

#define ICM456X_INT_APEX_CONFIG1_REG				0x3A
#define ICM456X_INT_APEX_CONFIG1_INT_STATUS_MASK_PIN_R2W_SLEEP_DET		(1<<0)
#define ICM456X_INT_APEX_CONFIG1_INT_STATUS_MASK_PIN_SMD_DET			(1<<1)
#define ICM456X_INT_APEX_CONFIG1_INT_STATUS_MASK_PIN_SELFTEST_DONE		(1<<2)
#define ICM456X_INT_APEX_CONFIG1_INT_STATUS_MASK_PIN_SA_DONE			(1<<4)

#define ICM456X_INT_APEX_STATUS0_REG				0x3B
#define ICM456X_INT_APEX_STATUS0_INT_STATUS_TAP_DET 					(1<<0)
#define ICM456X_INT_APEX_STATUS0_INT_STATUS_HIGH_G_DET 					(1<<1)
#define ICM456X_INT_APEX_STATUS0_INT_STATUS_LOW_G_DET					(1<<2)
#define ICM456X_INT_APEX_STATUS0_INT_STATUS_TILT_DET					(1<<3)
#define ICM456X_INT_APEX_STATUS0_INT_STATUS_STEP_CNT_OVFL				(1<<4)
#define ICM456X_INT_APEX_STATUS0_INT_STATUS_STEP_DET 					(1<<5)
#define ICM456X_INT_APEX_STATUS0_INT_STATUS_FF_DET						(1<<6)
#define ICM456X_INT_APEX_STATUS0_INT_STATUS_R2W_WAKE_DET				(1<<7)

#define ICM456X_INT_APEX_STATUS1_REG				0x3C
#define ICM456X_INT_APEX_STATUS1_INT_STATUS_R2W_SLEEP_DET				(1<<0)
#define ICM456X_INT_APEX_STATUS1_INT_STATUS_SMD_DET						(1<<1)
#define ICM456X_INT_APEX_STATUS1_INT_STATUS_SELFTEST_DONE				(1<<2)
#define ICM456X_INT_APEX_STATUS1_INT_STATUS_SA_DONE						(1<<4)

#define ICM456X_ACCEL_DATA_X1_AUX1_REG				0x44
#define ICM456X_ACCEL_DATA_X0_AUX1_REG				0x45
#define ICM456X_ACCEL_DATA_Y1_AUX1_REG				0x46
#define ICM456X_ACCEL_DATA_Y0_AUX1_REG				0x47
#define ICM456X_ACCEL_DATA_Z1_AUX1_REG				0x48
#define ICM456X_ACCEL_DATA_Z0_AUX1_REG				0x49

#define ICM456X_GYRO_DATA_X1_AUX1_REG				0x4A
#define ICM456X_GYRO_DATA_X0_AUX1_REG				0x4B
#define ICM456X_GYRO_DATA_Y1_AUX1_REG				0x4C
#define ICM456X_GYRO_DATA_Y0_AUX1_REG				0x4D
#define ICM456X_GYRO_DATA_Z1_AUX1_REG				0x4E
#define ICM456X_GYRO_DATA_Z0_AUX1_REG				0x4F

#define ICM456X_TEMP_DATA1_AUX1_REG					0x50
#define ICM456X_TEMP_DATA0_AUX1_REG					0x51

#define ICM456X_TMST_FSYNCH_AUX1_REG				0x52
#define ICM456X_TMST_FSYNCL_AUX1_REG				0x53

#define ICM456X_PWR_MGMT_AUX1_REG					0x54
#define ICM456X_PWR_MGMT_AUX1_ACCEL_AUX1_EN								(1<<0)
#define ICM456X_PWR_MGMT_AUX1_GYRO_AUX1_EN								(1<<1)

#define ICM456X_FS_SEL_AUX1_REG						0x55
#define ICM456X_FS_SEL_AUX1_ACCEL_MASK									(7<<0)
#define ICM456X_FS_SEL_AUX1_ACCEL_32G									(0<<0)
#define ICM456X_FS_SEL_AUX1_ACCEL_16G									(1<<0)
#define ICM456X_FS_SEL_AUX1_ACCEL_8G									(2<<0)
#define ICM456X_FS_SEL_AUX1_ACCEL_4G									(3<<0)
#define ICM456X_FS_SEL_AUX1_ACCEL_2G									(4<<0)
#define ICM456X_FS_SEL_AUX1_GYRO_MASK									(0xF<<3)
#define ICM456X_FS_SEL_AUX1_GYRO_4000									(0<<3)
#define ICM456X_FS_SEL_AUX1_GYRO_2000									(1<<3)
#define ICM456X_FS_SEL_AUX1_GYRO_1000									(2<<3)
#define ICM456X_FS_SEL_AUX1_GYRO_500									(3<<3)
#define ICM456X_FS_SEL_AUX1_GYRO_250									(4<<3)
#define ICM456X_FS_SEL_AUX1_GYRO_125									(5<<3)
#define ICM456X_FS_SEL_AUX1_GYRO_62_5									(6<<3)	//!< 62.5dps
#define ICM456X_FS_SEL_AUX1_GYRO_31_25									(7<<3)	//!< 31.25dps
#define ICM456X_FS_SEL_AUX1_GYRO_15_625									(8<<3)	//!< 15.625dps

#define ICM456X_INT2_CONFIG0_REG					0x56
#define ICM456X_INT2_CONFIG0_FIFO_FULL_EN								(1<<0)	//!<
#define ICM456X_INT2_CONFIG0_FIFO_THRS_EN								(1<<1)
#define ICM456X_INT2_CONFIG0_DRDY_EN									(1<<2)
#define ICM456X_INT2_CONFIG0_AUX1_DRDY_EN								(1<<3)
#define ICM456X_INT2_CONFIG0_AP_FSYNC_EN								(1<<4)
#define ICM456X_INT2_CONFIG0_AP_AGC_RDY_EN								(1<<5)
#define ICM456X_INT2_CONFIG0_AUX1_AGC_RDY_EN							(1<<6)
#define ICM456X_INT2_CONFIG0_RESET_DONE_EN								(1<<7)

#define ICM456X_INT2_CONFIG1_REG					0x57
#define ICM456X_INT2_CONFIG1_PLL_RDY_EN									(1<<0)
#define ICM456X_INT2_CONFIG1_WOM_X_EN									(1<<1)	//!<
#define ICM456X_INT2_CONFIG1_WOM_Y_EN									(1<<2)
#define ICM456X_INT2_CONFIG1_WOM_Z_EN									(1<<3)
#define ICM456X_INT2_CONFIG1_I3C_PROTOCOL_ERR_EN						(1<<4)
#define ICM456X_INT2_CONFIG1_I2CM_DONE_EN								(1<<5)
#define ICM456X_INT2_CONFIG1_APEX_EVENT_EN								(1<<6)

#define ICM456X_INT2_CONFIG2_REG					0x58
#define ICM456X_INT2_CONFIG2_POLARITY_HIGH								(1<<0)
#define ICM456X_INT2_CONFIG2_MODE_LATCH									(1<<1)
#define ICM456X_INT2_CONFIG2_DRIVE_OPEN_DRAIN							(1<<2)

#define ICM456X_INT_CONFIG_FIFO_FULL_EN									(1<<0)	//!<
#define ICM456X_INT_CONFIG_FIFO_THRS_EN									(1<<1)
#define ICM456X_INT_CONFIG_DRDY_EN										(1<<2)
#define ICM456X_INT_CONFIG_AUX1_DRDY_EN									(1<<3)
#define ICM456X_INT_CONFIG_AP_FSYNC_EN									(1<<4)
#define ICM456X_INT_CONFIG_AP_AGC_RDY_EN								(1<<5)
#define ICM456X_INT_CONFIG_AUX1_AGC_RDY_EN								(1<<6)
#define ICM456X_INT_CONFIG_RESET_DONE_EN								(1<<7)
#define ICM456X_INT_CONFIG_PLL_RDY_EN									(1<<8)
#define ICM456X_INT_CONFIG_WOM_X_EN										(1<<9)	//!<
#define ICM456X_INT_CONFIG_WOM_Y_EN										(1<<10)
#define ICM456X_INT_CONFIG_WOM_Z_EN										(1<<11)
#define ICM456X_INT_CONFIG_I3C_PROTOCOL_ERR_EN							(1<<12)
#define ICM456X_INT_CONFIG_I2CM_DONE_EN									(1<<13)
#define ICM456X_INT_CONFIG_APEX_EVENT_EN								(1<<14)
#define ICM456X_INT_CONFIG_POLARITY_HIGH								(1<<16)
#define ICM456X_INT_CONFIG_MODE_LATCH									(1<<17)
#define ICM456X_INT_CONFIG_DRIVE_OPEN_DRAIN								(1<<18)

#define ICM456X_INT2_STATUS0_REG					0x59
#define ICM456X_INT2_STATUS0_FIFO_FULL									(1<<0)
#define ICM456X_INT2_STATUS0_FIFO_THS									(1<<1)
#define ICM456X_INT2_STATUS0_DRDY										(1<<2)
#define ICM456X_INT2_STATUS0_AUX1_DRDY									(1<<3)
#define ICM456X_INT2_STATUS0_AP_FSYNC									(1<<4)
#define ICM456X_INT2_STATUS0_AP_AGC_RDY									(1<<5)
#define ICM456X_INT2_STATUS0_AUX1_AGC_RDY								(1<<6)
#define ICM456X_INT2_STATUS0_RESET_DONE									(1<<7)

#define ICM456X_INT2_STATUS1_REG					0x5A
#define ICM456X_INT2_STATUS1_PLL_RDY									(1<<0)
#define ICM456X_INT2_STATUS1_WOM_X										(1<<1)
#define ICM456X_INT2_STATUS1_WOM_Y										(1<<2)
#define ICM456X_INT2_STATUS1_WOM_Z										(1<<3)
#define ICM456X_INT2_STATUS1_I3C_PROTOCOL_ERR							(1<<4)
#define ICM456X_INT2_STATUS1_I2CM_DONE									(1<<5)
#define ICM456X_INT2_STATUS1_APEX_EVENT									(1<<6)

#define ICM456X_INT_STATUS_FIFO_FULL									(1<<0)
#define ICM456X_INT_STATUS_FIFO_THS										(1<<1)
#define ICM456X_INT_STATUS_DRDY											(1<<2)
#define ICM456X_INT_STATUS_AUX1_DRDY									(1<<3)
#define ICM456X_INT_STATUS_AP_FSYNC										(1<<4)
#define ICM456X_INT_STATUS_AP_AGC_RDY									(1<<5)
#define ICM456X_INT_STATUS_AUX1_AGC_RDY									(1<<6)
#define ICM456X_INT_STATUS_RESET_DONE									(1<<7)
#define ICM456X_INT_STATUS_PLL_RDY										(1<<8)
#define ICM456X_INT_STATUS_WOM_X										(1<<9)
#define ICM456X_INT_STATUS_WOM_Y										(1<<10)
#define ICM456X_INT_STATUS_WOM_Z										(1<<11)
#define ICM456X_INT_STATUS_I3C_PROTOCOL_ERR								(1<<12)
#define ICM456X_INT_STATUS_I2CM_DONE									(1<<13)
#define ICM456X_INT_STATUS_APEX_EVENT									(1<<14)

#define ICM456X_WHO_AM_I_REG						ICM456X_CHIP_ID_REG

#define ICM456X_REG_HOST_MSG_REG					0x73
#define ICM456X_REG_HOST_MSG_TESTOPENABLE								(1<<0)
#define ICM456X_REG_HOST_MSG_EDMP_ON_DEMAND_EN							(1<<5)

#define ICM456X_IREG_ADDR_15_8_REG					0x7C
#define ICM456X_IREG_ADDR_7_0_REG					0x7D

#define ICM456X_IREG_DATA_REG						0x7E

#define ICM456X_REG_MISC2_REG						0x7F
#define ICM456X_REG_MISC2_IREG_DONE										(1<<0)
#define ICM456X_REG_MISC2_SOFT_RST										(1<<1)

// USER BANK IMEM_SRAM REGISTER MAP

#define ICM456X_IMEM_SRAM_GYRO_X_STR_FT_L_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x0)
#define ICM456X_IMEM_SRAM_GYRO_X_STR_FT_H_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x1)
#define ICM456X_IMEM_SRAM_GYRO_Y_STR_FT_L_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x2)
#define ICM456X_IMEM_SRAM_GYRO_Y_STR_FT_H_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3)
#define ICM456X_IMEM_SRAM_GYRO_Z_STR_FT_L_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x4)
#define ICM456X_IMEM_SRAM_GYRO_Z_STR_FT_H_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x5)

#define ICM456X_IMEM_SRAM_GYRO_X_CMOS_GAIN_FT_L_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x6)
#define ICM456X_IMEM_SRAM_GYRO_X_CMOS_GAIN_FT_H_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x7)
#define ICM456X_IMEM_SRAM_GYRO_Y_CMOS_GAIN_FT_L_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x8)
#define ICM456X_IMEM_SRAM_GYRO_Y_CMOS_GAIN_FT_H_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x9)
#define ICM456X_IMEM_SRAM_GYRO_Z_CMOS_GAIN_FT_L_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xA)
#define ICM456X_IMEM_SRAM_GYRO_Z_CMOS_GAIN_FT_H_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xB)

#define ICM456X_IMEM_SRAM_REG_56_REG					(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x38)	// 56
#define ICM456X_IMEM_SRAM_REG_56_STC_INIT_EN							(1<<0)	//!< Initializes self-test parameters
#define ICM456X_IMEM_SRAM_REG_56_ST_ACCEL_EN 							(1<<1)	//!< Enable accel self-test operation
#define ICM456X_IMEM_SRAM_REG_56_ST_GYRO_EN 							(1<<2)
#define ICM456X_IMEM_SRAM_REG_56_ST_AVG_TIME_BIT0						(1<<7)

#define ICM456X_IMEM_SRAM_REG_57_REG					(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x39)	// 57
#define ICM456X_IMEM_SRAM_REG_57_ST_AVG_TIME_H_MASK						(3<<0)
#define ICM456X_IMEM_SRAM_REG_57_ST_ACCEL_LIMIT_MASK					(0x7<<2)
#define ICM456X_IMEM_SRAM_REG_57_ST_ACCEL_LIMIT_5						(0<<2)	//!< 5%
#define ICM456X_IMEM_SRAM_REG_57_ST_ACCEL_LIMIT_10						(1<<2)	//!< 10%
#define ICM456X_IMEM_SRAM_REG_57_ST_ACCEL_LIMIT_15						(2<<2)	//!< 15%
#define ICM456X_IMEM_SRAM_REG_57_ST_ACCEL_LIMIT_20						(3<<2)	//!< 20%
#define ICM456X_IMEM_SRAM_REG_57_ST_ACCEL_LIMIT_25						(4<<2)	//!< 25%
#define ICM456X_IMEM_SRAM_REG_57_ST_ACCEL_LIMIT_30						(5<<2)	//!< 30%
#define ICM456X_IMEM_SRAM_REG_57_ST_ACCEL_LIMIT_40						(6<<2)	//!< 40%
#define ICM456X_IMEM_SRAM_REG_57_ST_ACCEL_LIMIT_50						(7<<2)	//!< 50%
#define ICM456X_IMEM_SRAM_REG_57_ST_GYRO_LIMIT_MASK						(0x7<<5)
#define ICM456X_IMEM_SRAM_REG_57_ST_GYRO_LIMIT_5						(0<<5)	//!< 5%
#define ICM456X_IMEM_SRAM_REG_57_ST_GYRO_LIMIT_10						(1<<5)	//!< 10%
#define ICM456X_IMEM_SRAM_REG_57_ST_GYRO_LIMIT_15						(2<<5)	//!< 15%
#define ICM456X_IMEM_SRAM_REG_57_ST_GYRO_LIMIT_20						(3<<5)	//!< 20%
#define ICM456X_IMEM_SRAM_REG_57_ST_GYRO_LIMIT_25						(4<<5)	//!< 25%
#define ICM456X_IMEM_SRAM_REG_57_ST_GYRO_LIMIT_30						(5<<5)	//!< 30%
#define ICM456X_IMEM_SRAM_REG_57_ST_GYRO_LIMIT_40						(6<<5)	//!< 40%
#define ICM456X_IMEM_SRAM_REG_57_ST_GYRO_LIMIT_50						(7<<5)	//!< 50%

#define ICM456X_IMEM_SRAM_REG_64_ST_DEBUG_EN_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x40)

#define ICM456X_IMEM_SRAM_REG_68_REG					(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x44)
#define ICM456X_IMEM_SRAM_REG_68_AX_ST_PASS								(1<<0)
#define ICM456X_IMEM_SRAM_REG_68_AY_ST_PASS								(1<<1)
#define ICM456X_IMEM_SRAM_REG_68_AZ_ST_PASS								(1<<2)
#define ICM456X_IMEM_SRAM_REG_68_GX_ST_PASS								(1<<3)
#define ICM456X_IMEM_SRAM_REG_68_GY_ST_PASS								(1<<4)
#define ICM456X_IMEM_SRAM_REG_68_GZ_ST_PASS								(1<<5)
#define ICM456X_IMEM_SRAM_REG_68_ST_STATUS_MASK							(3<<6)
#define ICM456X_IMEM_SRAM_REG_68_ST_STATUS_DONE							(0<<6)
#define ICM456X_IMEM_SRAM_REG_68_ST_STATUS_IN_PROGRESS					(1<<6)
#define ICM456X_IMEM_SRAM_REG_68_ST_STATUS_ERROR						(2<<6)

#define ICM456X_IMEM_SRAM_REG_92_QUAT_RESET_EN_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x5C)
#define ICM456X_IMEM_SRAM_REG_96_STC_GAIN_GX_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x60)
#define ICM456X_IMEM_SRAM_REG_97_STC_GAIN_GX_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x61)
#define ICM456X_IMEM_SRAM_REG_98_STC_GAIN_GX_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x62)
#define ICM456X_IMEM_SRAM_REG_99_STC_GAIN_GX_31_25_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x63)
#define ICM456X_IMEM_SRAM_REG_100_STC_GAIN_GY_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x64)
#define ICM456X_IMEM_SRAM_REG_101_STC_GAIN_GY_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x65)
#define ICM456X_IMEM_SRAM_REG_102_STC_GAIN_GY_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x66)
#define ICM456X_IMEM_SRAM_REG_103_STC_GAIN_GY_31_25_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x67)
#define ICM456X_IMEM_SRAM_REG_104_STC_GAIN_GZ_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x68)
#define ICM456X_IMEM_SRAM_REG_105_STC_GAIN_GZ_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x69)
#define ICM456X_IMEM_SRAM_REG_106_STC_GAIN_GZ_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x6A)
#define ICM456X_IMEM_SRAM_REG_107_STC_GAIN_GZ_31_25_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x6B)
#define ICM456X_IMEM_SRAM_REG_FF_DURATION_BUF1_L_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x88)
#define ICM456X_IMEM_SRAM_REG_FF_DURATION_BUF1_H_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x89)
#define ICM456X_IMEM_SRAM_REG_FF_DURATION_BUF2_L_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x8A)
#define ICM456X_IMEM_SRAM_REG_FF_DURATION_BUF2_H_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x8B)
#define ICM456X_IMEM_SRAM_REG_TAP_NUM_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x8D)
#define ICM456X_IMEM_SRAM_REG_TAP_AXIS_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x8E)
#define ICM456X_IMEM_SRAM_REG_TAP_DIR_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x8F)
#define ICM456X_IMEM_SRAM_REG_DOUBLE_TAP_TIMING_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x90)
#define ICM456X_IMEM_SRAM_REG_TILT_RESET_EN_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x92)
#define ICM456X_IMEM_SRAM_REG_PED_STEP_CNT_BUF1_L_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x9A)
#define ICM456X_IMEM_SRAM_REG_PED_STEP_CNT_BUF1_H_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x9B)
#define ICM456X_IMEM_SRAM_REG_PED_STEP_CNT_BUF2_L_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x9C)
#define ICM456X_IMEM_SRAM_REG_PED_STEP_CNT_BUF2_H_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x9D)
#define ICM456X_IMEM_SRAM_REG_PED_STEP_CADENCE_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x9F)

#define ICM456X_IMEM_SRAM_REG_160_REG					(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xA0)
#define ICM456X_IMEM_SRAM_REG_160_POWER_ACTIVITY_CLASS_UNKNOWN			(0<<0)
#define ICM456X_IMEM_SRAM_REG_160_POWER_ACTIVITY_CLASS_WALK				(1<<0)
#define ICM456X_IMEM_SRAM_REG_160_POWER_ACTIVITY_CLASS_RUN				(2<<0)

#define ICM456X_IMEM_SRAM_REG_ES_RAM_IMAGE_EN_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xB6)
#define ICM456X_IMEM_SRAM_REG_ES0_COMPASS_EN_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xB9)
#define ICM456X_IMEM_SRAM_REG_ES_POWER_MODE_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xBA)
#define ICM456X_IMEM_SRAM_REG_POWER_SAVE_TIME_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xC4)
#define ICM456X_IMEM_SRAM_REG_POWER_SAVE_TIME_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xC5)
#define ICM456X_IMEM_SRAM_REG_POWER_SAVE_TIME_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xC6)
#define ICM456X_IMEM_SRAM_REG_POWER_SAVE_TIME_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0xC7)
#define ICM456X_IMEM_SRAM_REG_FF_MIN_DURATION_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x120)
#define ICM456X_IMEM_SRAM_REG_FF_MIN_DURATION_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x121)
#define ICM456X_IMEM_SRAM_REG_FF_MIN_DURATION_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x122)
#define ICM456X_IMEM_SRAM_REG_FF_MIN_DURATION_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x123)
#define ICM456X_IMEM_SRAM_REG_FF_MAX_DURATION_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x124)
#define ICM456X_IMEM_SRAM_REG_FF_MAX_DURATION_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x125)
#define ICM456X_IMEM_SRAM_REG_FF_MAX_DURATION_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x126)
#define ICM456X_IMEM_SRAM_REG_FF_MAX_DURATION_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x127)
#define ICM456X_IMEM_SRAM_REG_FF_DEBOUNCE_DURATION_7_0_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x128)
#define ICM456X_IMEM_SRAM_REG_FF_DEBOUNCE_DURATION_15_8_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x129)
#define ICM456X_IMEM_SRAM_REG_FF_DEBOUNCE_DURATION_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x12A)
#define ICM456X_IMEM_SRAM_REG_FF_DEBOUNCE_DURATION_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x12B)

#define ICM456X_IMEM_SRAM_REG_HIGHG_PEAK_TH_L_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x130)
#define ICM456X_IMEM_SRAM_REG_HIGHG_PEAK_TH_H_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x131)

#define ICM456X_IMEM_SRAM_REG_HIGHG_PEAK_TH_HYST_L_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x132)
#define ICM456X_IMEM_SRAM_REG_HIGHG_PEAK_TH_HYST_H_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x133)

#define ICM456X_IMEM_SRAM_REG_HIGHG_TIME_TH_L_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x134)
#define ICM456X_IMEM_SRAM_REG_HIGHG_TIME_TH_H_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x135)

#define ICM456X_IMEM_SRAM_REG_LOWG_PEAK_TH_L_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x13C)
#define ICM456X_IMEM_SRAM_REG_LOWG_PEAK_TH_H_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x13D)

#define ICM456X_IMEM_SRAM_REG_LOWG_PEAK_TH_HYST_L_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x13E)
#define ICM456X_IMEM_SRAM_REG_LOWG_PEAK_TH_HYST_H_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x13F)

#define ICM456X_IMEM_SRAM_REG_LOWG_TIME_TH_L_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x140)
#define ICM456X_IMEM_SRAM_REG_LOWG_TIME_TH_H_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x141)

#define ICM456X_IMEM_SRAM_REG_TILT_WAIT_TIME_L_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x188)
#define ICM456X_IMEM_SRAM_REG_TILT_WAIT_TIME_H_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x189)

#define ICM456X_IMEM_SRAM_REG_TAP_TMAX_L_REG					(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x190)
#define ICM456X_IMEM_SRAM_REG_TAP_TMAX_H_REG					(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x191)

#define ICM456X_IMEM_SRAM_REG_TAP_TMIN_REG						(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x192)

#define ICM456X_IMEM_SRAM_REG_TAP_MIN_JERK_REG					(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x193)

#define ICM456X_IMEM_SRAM_REG_TAP_SMUDGE_REJECT_THR_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x194)
#define ICM456X_IMEM_SRAM_REG_TAP_MAX_PEAK_TOL_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x195)
#define ICM456X_IMEM_SRAM_REG_TAP_TAVG_REG						(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x196)

#define ICM456X_IMEM_SRAM_REG_R2W_SLEEP_TIME_OUT_7_0_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x21C)
#define ICM456X_IMEM_SRAM_REG_R2W_SLEEP_TIME_OUT_15_8_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x21D)
#define ICM456X_IMEM_SRAM_REG_R2W_SLEEP_TIME_OUT_23_16_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x21E)
#define ICM456X_IMEM_SRAM_REG_R2W_SLEEP_TIME_OUT_31_24_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x21F)

#define ICM456X_IMEM_SRAM_REG_R2W_SLEEP_GESTURE_DELAY_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x220)
#define ICM456X_IMEM_SRAM_REG_R2W_SLEEP_GESTURE_DELAY_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x221)
#define ICM456X_IMEM_SRAM_REG_R2W_SLEEP_GESTURE_DELAY_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x222)
#define ICM456X_IMEM_SRAM_REG_R2W_SLEEP_GESTURE_DELAY_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x223)

#define ICM456X_IMEM_SRAM_REG_R2W_MOUNTING_MATRIX_7_0_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x224)
#define ICM456X_IMEM_SRAM_REG_R2W_MOUNTING_MATRIX_15_8_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x225)
#define ICM456X_IMEM_SRAM_REG_R2W_MOUNTING_MATRIX_23_16_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x226)
#define ICM456X_IMEM_SRAM_REG_R2W_MOUNTING_MATRIX_31_24_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x227)

#define ICM456X_IMEM_SRAM_REG_R2W_GRAVITY_FILTER_GAIN_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x22C)
#define ICM456X_IMEM_SRAM_REG_R2W_GRAVITY_FILTER_GAIN_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x22D)
#define ICM456X_IMEM_SRAM_REG_R2W_GRAVITY_FILTER_GAIN_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x22E)
#define ICM456X_IMEM_SRAM_REG_R2W_GRAVITY_FILTER_GAIN_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x22F)

#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_ANGLE_COSINE_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x230)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_ANGLE_COSINE_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x231)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_ANGLE_COSINE_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x232)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_ANGLE_COSINE_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x233)

#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_TIMER_FAST_7_0_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x234)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_TIMER_FAST_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x235)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_TIMER_FAST_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x236)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_TIMER_FAST_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x237)

#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_TIMER_SLOW_7_0_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x238)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_TIMER_SLOW_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x239)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_TIMER_SLOW_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x23A)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_THR_TIMER_SLOW_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x23B)

#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_PREV_GRAVITY_TIMEOUT_7_0_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x23C)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_PREV_GRAVITY_TIMEOUT_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x23D)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_PREV_GRAVITY_TIMEOUT_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x23E)
#define ICM456X_IMEM_SRAM_REG_R2W_MOTION_PREV_GRAVITY_TIMEOUT_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x23F)

#define ICM456X_IMEM_SRAM_REG_R2W_LAST_GRAVITY_MOTION_TIMER_7_0_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x240)
#define ICM456X_IMEM_SRAM_REG_R2W_LAST_GRAVITY_MOTION_TIMER_15_8_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x241)
#define ICM456X_IMEM_SRAM_REG_R2W_LAST_GRAVITY_MOTION_TIMER_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x242)
#define ICM456X_IMEM_SRAM_REG_R2W_LAST_GRAVITY_MOTION_TIMER_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x243)

#define ICM456X_IMEM_SRAM_REG_R2W_LAST_GRAVITY_TIMEOUT_7_0_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x244)
#define ICM456X_IMEM_SRAM_REG_R2W_LAST_GRAVITY_TIMEOUT_15_8_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x245)
#define ICM456X_IMEM_SRAM_REG_R2W_LAST_GRAVITY_TIMEOUT_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x246)
#define ICM456X_IMEM_SRAM_REG_R2W_LAST_GRAVITY_TIMEOUT_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x247)

#define ICM456X_IMEM_SRAM_REG_R2W_GESTURE_VALIDITY_TIMEOUT_7_0_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x248)
#define ICM456X_IMEM_SRAM_REG_R2W_GESTURE_VALIDITY_TIMEOUT_15_8_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x249)
#define ICM456X_IMEM_SRAM_REG_R2W_GESTURE_VALIDITY_TIMEOUT_23_16_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x24A)
#define ICM456X_IMEM_SRAM_REG_R2W_GESTURE_VALIDITY_TIMEOUT_31_24_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x24B)

#define ICM456X_IMEM_SRAM_REG_PED_STEP_CNT_TH_L_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3DC)
#define ICM456X_IMEM_SRAM_REG_PED_STEP_CNT_TH_H_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3DD)

#define ICM456X_IMEM_SRAM_REG_PED_STEP_DET_TH_L_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3DE)
#define ICM456X_IMEM_SRAM_REG_PED_STEP_DET_TH_H_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3DF)

#define ICM456X_IMEM_SRAM_REG_PED_SB_TIMER_TH_L_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3E2)
#define ICM456X_IMEM_SRAM_REG_PED_SB_TIMER_TH_H_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3E3)

#define ICM456X_IMEM_SRAM_REG_PED_LOW_EN_AMP_TH_7_0_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3E8)
#define ICM456X_IMEM_SRAM_REG_PED_LOW_EN_AMP_TH_15_8_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3E9)
#define ICM456X_IMEM_SRAM_REG_PED_LOW_EN_AMP_TH_23_16_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3EA)
#define ICM456X_IMEM_SRAM_REG_PED_LOW_EN_AMP_TH_31_24_REG		(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3EB)

#define ICM456X_IMEM_SRAM_REG_PED_SENSITIVITY_MODE_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3EC)
#define ICM456X_IMEM_SRAM_REG_PED_SENSITIVITY_MODE_NORMAL				(0)
#define ICM456X_IMEM_SRAM_REG_PED_SENSITIVITY_MODE_SLOW_WALK			(1)

#define ICM456X_IMEM_SRAM_REG_PED_AMP_TH_7_0_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3F0)
#define ICM456X_IMEM_SRAM_REG_PED_AMP_TH_15_8_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3F1)
#define ICM456X_IMEM_SRAM_REG_PED_AMP_TH_23_16_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3F2)
#define ICM456X_IMEM_SRAM_REG_PED_AMP_TH_31_24_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3F3)

#define ICM456X_IMEM_SRAM_REG_PED_HI_EN_TH_7_0_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3F8)
#define ICM456X_IMEM_SRAM_REG_PED_HI_EN_TH_15_8_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3F9)
#define ICM456X_IMEM_SRAM_REG_PED_HI_EN_TH_23_16_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3FA)
#define ICM456X_IMEM_SRAM_REG_PED_HI_EN_TH_31_24_REG			(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x3FB)

#define ICM456X_IMEM_SRAM_REG_SMD_SENSITIVITY_REG				(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x412)

#define ICM456X_IMEM_SRAM_REG_SOFT_IRON_SENSITIVITY_MATRIX_REG	(ICM456X_BASE_ADDRESS_IMEM_SRAM | 0x490)		//!< Reg addr 0x490-4B3, Input 3x3 calibration matrix in q14 format applied to uncalibrated data.


// USER BANK IPREG_BAR REGISTER MAP

#define ICM456X_IPREG_BAR_REG_57_REG						(ICM456X_BASE_ADDRESS_IPREG_BAR | 0x39)
#define ICM456X_IPREG_BAR_REG_57_IO_OPT1								(1<<5)
#define ICM456X_IPREG_BAR_REG_57_IO_OPT0								(1<<6)

#define ICM456X_IPREG_BAR_REG_58_REG						(ICM456X_BASE_ADDRESS_IPREG_BAR | 0x3A)
#define ICM456X_IPREG_BAR_REG_58_IO_OPT2								(1<<0)
#define ICM456X_IPREG_BAR_REG_58_PADS_AP_CS_PE_TRIM_D2A_EN				(1<<3)
#define ICM456X_IPREG_BAR_REG_58_PADS_AP_CS_PUD_TRIM_D2A_UP				(1<<4)
#define ICM456X_IPREG_BAR_REG_58_PADS_AP_SCLK_PE_TRIM_D2A_EN			(1<<6)
#define ICM456X_IPREG_BAR_REG_58_PADS_AP_SCLK_PUD_TRIM_D2A_UP			(1<<7)

#define ICM456X_IPREG_BAR_REG_59_REG						(ICM456X_BASE_ADDRESS_IPREG_BAR | 0x3B)
#define ICM456X_IPREG_BAR_REG_59_PADS_AP_SDI_PE_TRIM_D2A_EN				(1<<1)
#define ICM456X_IPREG_BAR_REG_59_PADS_AP_SDI_PUD_TRIM_D2A_UP			(1<<2)
#define ICM456X_IPREG_BAR_REG_59_PADS_AP_SDO_PE_TRIM_D2A_EN				(1<<4)
#define ICM456X_IPREG_BAR_REG_59_PADS_AP_SDO_PUD_TRIM_D2A_UP			(1<<5)
#define ICM456X_IPREG_BAR_REG_59_PADS_PIN7_PE_TRIM_D2A_EN				(1<<7)

#define ICM456X_IPREG_BAR_REG_60_REG						(ICM456X_BASE_ADDRESS_IPREG_BAR | 0x3C)
#define ICM456X_IPREG_BAR_REG_60_PADS_PIN7_CS_PUD_TRIM_D2A_UP			(1<<0)
#define ICM456X_IPREG_BAR_REG_60_PADS_AUX1_CS_PE_TRIM_D2A_UP			(1<<2)
#define ICM456X_IPREG_BAR_REG_60_PADS_AUX1_CS_PUD_TRIM_D2A_EN			(1<<3)
#define ICM456X_IPREG_BAR_REG_60_PADS_AUX_SCLK_TP2_FROM_PAD_DISABLE_TRIM_D2A	(1<<4)
#define ICM456X_IPREG_BAR_REG_60_PADS_AUX1_SCLK_PE_TRIM_D2A_UP			(1<<5)
#define ICM456X_IPREG_BAR_REG_60_PADS_AUX1_SCLK_PUD_TRIM_D2A_EN			(1<<6)

#define ICM456X_IPREG_BAR_REG_61_REG						(ICM456X_BASE_ADDRESS_IPREG_BAR | 0x3D)
#define ICM456X_IPREG_BAR_REG_61_PADS_AUX1_SDI_PE_TRIM_D2A_UP			(1<<0)
#define ICM456X_IPREG_BAR_REG_61_PADS_AUX1_SDI_PUD_TRIM_D2A_EN			(1<<1)
#define ICM456X_IPREG_BAR_REG_61_PADS_AUX1_SDO_PE_TRIM_D2A_EN			(1<<3)
#define ICM456X_IPREG_BAR_REG_61_PADS_AUX1_SDO_PUD_TRIM_D2A_UP			(1<<4)
#define ICM456X_IPREG_BAR_REG_61_PADS_INT1_PE_TRIM_D2A_UP				(1<<6)
#define ICM456X_IPREG_BAR_REG_61_PADS_INT1_PUD_TRIM_D2A_EN				(1<<7)

#define ICM456X_IPREG_BAR_REG_62_REG						(ICM456X_BASE_ADDRESS_IPREG_BAR | 0x3E)
#define ICM456X_IPREG_BAR_REG_62_PADS_INT2_PE_TRIM_D2A_EN				(1<<1)
#define ICM456X_IPREG_BAR_REG_62_PADS_INT2_PUD_TRIM_D2A_UP				(1<<2)

// USER BANK IPREG_TOP1 REGISTER MAP

#define ICM456X_I2CM_COMMAND_0_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x6)
#define ICM456X_I2CM_COMMAND_0_BURSTLEN_MASK							(0xF<<0)
#define ICM456X_I2CM_COMMAND_0_R_W_MASK									(3<<4)
#define ICM456X_I2CM_COMMAND_0_R_W_WR									(0<<4)	//!< Write
#define ICM456X_I2CM_COMMAND_0_R_W_RD_W_AD								(1<<4)	//!< Read with address specified
#define ICM456X_I2CM_COMMAND_0_R_W_RD_WO_AD								(2<<4)	//!< Read without address
#define ICM456X_I2CM_COMMAND_0_CH_SEL_ID1								(0<<6)
#define ICM456X_I2CM_COMMAND_0_CH_SEL_ID2								(1<<6)
#define ICM456X_I2CM_COMMAND_0_ENDFLAG									(1<<7)

#define ICM456X_I2CM_COMMAND_1_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x7)
#define ICM456X_I2CM_COMMAND_1_BURSTLEN_MASK							(0xF<<0)
#define ICM456X_I2CM_COMMAND_1_R_W_MASK									(3<<4)
#define ICM456X_I2CM_COMMAND_1_R_W_WR									(0<<4)	//!< Write
#define ICM456X_I2CM_COMMAND_1_R_W_RD_W_AD								(1<<4)	//!< Read with address specified
#define ICM456X_I2CM_COMMAND_1_R_W_RD_WO_AD								(2<<4)	//!< Read without address
#define ICM456X_I2CM_COMMAND_1_CH_SEL_ID1								(0<<6)
#define ICM456X_I2CM_COMMAND_1_CH_SEL_ID2								(1<<6)
#define ICM456X_I2CM_COMMAND_1_ENDFLAG									(1<<7)

#define ICM456X_I2CM_COMMAND_2_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x8)
#define ICM456X_I2CM_COMMAND_2_BURSTLEN_MASK							(0xF<<0)
#define ICM456X_I2CM_COMMAND_2_R_W_MASK									(3<<4)
#define ICM456X_I2CM_COMMAND_2_R_W_WR									(0<<4)	//!< Write
#define ICM456X_I2CM_COMMAND_2_R_W_RD_W_AD								(1<<4)	//!< Read with address specified
#define ICM456X_I2CM_COMMAND_2_R_W_RD_WO_AD								(2<<4)	//!< Read without address
#define ICM456X_I2CM_COMMAND_2_CH_SEL_ID1								(0<<6)
#define ICM456X_I2CM_COMMAND_2_CH_SEL_ID2								(1<<6)
#define ICM456X_I2CM_COMMAND_2_ENDFLAG									(1<<7)

#define ICM456X_I2CM_COMMAND_3_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x9)
#define ICM456X_I2CM_COMMAND_3_BURSTLEN_MASK							(0xF<<0)
#define ICM456X_I2CM_COMMAND_3_R_W_MASK									(3<<4)
#define ICM456X_I2CM_COMMAND_3_R_W_WR									(0<<4)	//!< Write
#define ICM456X_I2CM_COMMAND_3_R_W_RD_W_AD								(1<<4)	//!< Read with address specified
#define ICM456X_I2CM_COMMAND_3_R_W_RD_WO_AD								(2<<4)	//!< Read without address
#define ICM456X_I2CM_COMMAND_3_CH_SEL_ID1								(0<<6)
#define ICM456X_I2CM_COMMAND_3_CH_SEL_ID2								(1<<6)
#define ICM456X_I2CM_COMMAND_3_ENDFLAG									(1<<7)

#define ICM456X_I2CM_DEV_PROFILE0_RD_ADDRESS_0_REG			(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0xE)
#define ICM456X_I2CM_DEV_PROFILE1_DEV_ID_0_REG				(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0xF)
#define ICM456X_I2CM_DEV_PROFILE2_RD_ADDRESS_1_REG			(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x10)
#define ICM456X_I2CM_DEV_PROFILE2_DEV_ID_1_REG				(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x11)

#define ICM456X_I2CM_CONTROL_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x16)
#define ICM456X_I2CM_CONTROL_I2CM_GO									(1<<0)
#define ICM456X_I2CM_CONTROL_I2CM_SPEED_FAST							(0<<3)
#define ICM456X_I2CM_CONTROL_I2CM_SPEED_STD								(1<<3)
#define ICM456X_I2CM_CONTROL_I2CM_RESTART_EN							(1<<6)

#define ICM456X_I2CM_STATUS_REG								(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x18)
#define ICM456X_I2CM_STATUS_I2CM_BUSY									(1<<0)
#define ICM456X_I2CM_STATUS_I2CM_DONE									(1<<1)
#define ICM456X_I2CM_STATUS_I2CM_TIMEOUT_ERR							(1<<2)
#define ICM456X_I2CM_STATUS_I2CM_SRST_ERR								(1<<3)
#define ICM456X_I2CM_STATUS_I2CM_SCL_ERR								(1<<4)
#define ICM456X_I2CM_STATUS_I2CM_SDA_ERR								(1<<5)

#define ICM456X_I2CM_EXT_DEV_STATUS_REG						(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x1A)
#define ICM456X_I2CM_EXT_DEV_STATUS_I2CM_EXT_DEV_STATUS_MASK			(0xf<<0)

#define ICM456X_I2CM_RD_DATA0_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x1B)
#define ICM456X_I2CM_RD_DATA1_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x1C)
#define ICM456X_I2CM_RD_DATA20_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x2F)

#define ICM456X_I2CM_WR_DATA0_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x33)
#define ICM456X_I2CM_WR_DATA5_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x38)

#define ICM456X_SIFS_IXC_ERROR_STATUS_REG					(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x4B)
#define ICM456X_SIFS_IXC_ERROR_STATUS_TIMEOUT_ERR						(1<<0)
#define ICM456X_SIFS_IXC_ERROR_STATUS_AUX1_TIMEOUT_ERR					(1<<1)

#define ICM456X_EDMP_PRGRM_IRQ0_START_ADDR_0_REG			(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x4F)
#define ICM456X_EDMP_PRGRM_IRQ0_START_ADDR_1_REG			(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x50)

#define ICM456X_EDMP_PRGRM_IRQ1_START_ADDR_0_REG			(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x51)
#define ICM456X_EDMP_PRGRM_IRQ1_START_ADDR_1_REG			(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x52)

#define ICM456X_EDMP_PRGRM_IRQ2_START_ADDR_0_REG			(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x53)
#define ICM456X_EDMP_PRGRM_IRQ2_START_ADDR_1_REG			(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x54)

#define ICM456X_EDMP_SP_START_ADDR_REG						(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x55)

#define ICM456X_SMC_CONTROL_0_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x58)
#define ICM456X_SMC_CONTROL_0_TMST_EN									(1<<0)
#define ICM456X_SMC_CONTROL_0_TMST_FSYNC_EN								(1<<1)
#define ICM456X_SMC_CONTROL_0_TMST_FORCE_AUX_FINE_EN					(1<<2)
#define ICM456X_SMC_CONTROL_0_TEMP_DIS									(1<<3)
#define ICM456X_SMC_CONTROL_0_ACCEL_LP_CLK_AULP							(0<<4)
#define ICM456X_SMC_CONTROL_0_ACCEL_LP_CLK_ALP							(1<<4)

#define ICM456X_SMC_CONTROL_1_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x59)
#define ICM456X_SMC_CONTROL_1_SREG_AUX_ACCEL_ONLY_EN					(1<<3)

#define ICM456X_STC_CONFIG_REG								(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x63)
#define ICM456X_STC_CONFIG_SENSOR_SEL_MASK								(3<<2)
#define ICM456X_STC_CONFIG_SENSOR_SEL_SLOWEST							(1<<2)
#define ICM456X_STC_CONFIG_SENSOR_SEL_ACCEL								(2<<2)
#define ICM456X_STC_CONFIG_SENSOR_SEL_GYRO								(3<<2)

#define ICM456X_SREG_CTRL_REG								(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x67)
#define ICM456X_SREG_CTRL_DATA_LITTLE_ENDIAN							(0<<1)
#define ICM456X_SREG_CTRL_DATA_BIG_ENDIAN								(1<<1)

#define ICM456X_SIFS_I3C_STC_CFG_REG						(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x68)
#define ICM456X_SIFS_I3C_STC_CFG_I3C_STC_EN								(1<<2)

#define ICM456X_INT_PULSE_MIN_ON_INTF0_REG					(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x69)
#define ICM456X_INT_PULSE_MIN_ON_INTF0_INT0_TPULSE_DURATION_MASK		(7<<0)
#define ICM456X_INT_PULSE_MIN_ON_INTF0_INT0_TPULSE_DURATION_100US		(0<<0)
#define ICM456X_INT_PULSE_MIN_ON_INTF0_INT0_TPULSE_DURATION_8US			(1<<0)

#define ICM456X_INT_PULSE_MIN_ON_INTF1_REG					(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x6A)
#define ICM456X_INT_PULSE_MIN_ON_INTF1_INT1_TPULSE_DURATION_MASK		(7<<0)
#define ICM456X_INT_PULSE_MIN_ON_INTF1_INT1_TPULSE_DURATION_100US		(0<<0)
#define ICM456X_INT_PULSE_MIN_ON_INTF1_INT1_TPULSE_DURATION_8US			(1<<0)

#define ICM456X_INT_PULSE_MIN_OFF_INTF0_REG					(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x6B)
#define ICM456X_INT_PULSE_MIN_OFF_INTF0_INT0_TDEASSERT_DISABLE_MASK		(7<<0)
#define ICM456X_INT_PULSE_MIN_OFF_INTF0_INT0_TDEASSERT_DISABLE_100US	(0<<0)
#define ICM456X_INT_PULSE_MIN_OFF_INTF0_INT0_TDEASSERT_DISABLE_8US		(1<<0)

#define ICM456X_INT_PULSE_MIN_OFF_INTF1_REG					(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x6C)
#define ICM456X_INT_PULSE_MIN_OFF_INTF1_INT1_TDEASSERT_DISABLE_MASK		(7<<0)
#define ICM456X_INT_PULSE_MIN_OFF_INTF1_INT1_TDEASSERT_DISABLE_100US	(0<<0)
#define ICM456X_INT_PULSE_MIN_OFF_INTF1_INT1_TDEASSERT_DISABLE_8US		(1<<0)

#define ICM456X_ISR_0_7_REG									(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x6E)
#define ICM456X_ISR_0_7_INT_STATUS_ACCEL_DRDY_PIN_0						(1<<0)
#define ICM456X_ISR_0_7_INT_STATUS_EXT_ODR_DRDY_PIN_0					(1<<3)
#define ICM456X_ISR_0_7_INT_STATUS_ON_DEMAND_PIN_0						(1<<5)

#define ICM456X_ISR_8_15_REG								(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x6F)
#define ICM456X_ISR_8_15_INT_STATUS_ACCEL_DRDY_PIN_1					(1<<0)
#define ICM456X_ISR_8_15_INT_STATUS_EXT_ODR_DRDY_PIN_1					(1<<3)
#define ICM456X_ISR_8_15_INT_STATUS_ON_DEMAND_PIN_1						(1<<5)

#define ICM456X_ISR_16_23_REG								(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x70)
#define ICM456X_ISR_16_23_INT_STATUS_ACCEL_DRDY_PIN_2					(1<<0)
#define ICM456X_ISR_16_23_INT_STATUS_EXT_ODR_DRDY_PIN_2					(1<<3)
#define ICM456X_ISR_16_23_INT_STATUS_ON_DEMAND_PIN_2					(1<<5)

#define ICM456X_STATUS_MASK_PIN_0_7_REG						(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x71)
#define ICM456X_STATUS_MASK_PIN_0_7_INT_ACCEL_DRDY_PIN_0_DIS			(1<<0)
#define ICM456X_STATUS_MASK_PIN_0_7_INT_EXT_ODR_DRDY_PIN_0_DIS			(1<<3)
#define ICM456X_STATUS_MASK_PIN_0_7_INT_ON_DEMAND_PIN_0_DIS				(1<<5)

#define ICM456X_STATUS_MASK_PIN_8_15_REG					(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x72)
#define ICM456X_STATUS_MASK_PIN_8_15_INT_ACCEL_DRDY_PIN_1_DIS			(1<<0)
#define ICM456X_STATUS_MASK_PIN_8_15_INT_EXT_ODR_DRDY_PIN_1_DIS			(1<<3)
#define ICM456X_STATUS_MASK_PIN_8_15_INT_ON_DEMAND_PIN_1_DIS			(1<<5)

#define ICM456X_STATUS_MASK_PIN_16_23_REG					(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x73)
#define ICM456X_STATUS_MASK_PIN_16_23_INT_ACCEL_DRDY_PIN_2_DIS			(1<<0)
#define ICM456X_STATUS_MASK_PIN_16_23_INT_EXT_ODR_DRDY_PIN_2_DIS		(1<<3)
#define ICM456X_STATUS_MASK_PIN_16_23_INT_ON_DEMAND_PIN_2_DIS			(1<<5)

#define ICM456X_INT_I2CM_SOURCE_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x74)
#define ICM456X_INT_I2CM_SOURCE_INT_STATUS_I2CM_SMC_EXT_ODR_EN			(1<<1)

#define ICM456X_ACCEL_WOM_X_THR_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x7E)
#define ICM456X_ACCEL_WOM_Y_THR_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x7F)
#define ICM456X_ACCEL_WOM_Z_THR_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x80)

#define ICM456X_SELFTEST_REG								(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x90)
#define ICM456X_SELFTEST_EN_AX_ST										(1<<0)
#define ICM456X_SELFTEST_EN_AY_ST										(1<<1)
#define ICM456X_SELFTEST_EN_AZ_ST										(1<<2)
#define ICM456X_SELFTEST_EN_GX_ST										(1<<3)
#define ICM456X_SELFTEST_EN_GY_ST										(1<<4)
#define ICM456X_SELFTEST_EN_GZ_ST										(1<<5)

#define ICM456X_IPREG_MISC_REG								(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0x97)
#define ICM456X_IPREG_MISC_EDMP_IDLE									(1<<1)

#define ICM456X_SW_PLL1_TRIM_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0xA2)

#define ICM456X_FIFO_SRAM_SLEEP_REG							(ICM456X_BASE_ADDRESS_IPREG_TOP1 | 0xA7)
#define ICM456X_FIFO_SRAM_SLEEP_FIFO_GSLEEP_SHARED_SRAM_BANK0			(1<<0)
#define ICM456X_FIFO_SRAM_SLEEP_FIFO_GSLEEP_SHARED_SRAM_BANK1			(2<<0)

// USER BANK IPREG_SYS1 REGISTER MAP

#define ICM456X_IPREG_SYS1_REG_42_GYRO_X_OFFUSER_7_0_REG	(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0x2A)
#define ICM456X_IPREG_SYS1_REG_43_GYRO_X_OFFUSER_13_8_REG	(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0x2B)
#define ICM456X_IPREG_SYS1_REG_56_GYRO_Y_OFFUSER_7_0_REG	(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0x38)
#define ICM456X_IPREG_SYS1_REG_57_GYRO_Y_OFFUSER_13_8_REG	(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0x39)
#define ICM456X_IPREG_SYS1_REG_70_GYRO_Z_OFFUSER_7_0_REG	(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0x46)
#define ICM456X_IPREG_SYS1_REG_71_GYRO_Z_OFFUSER_13_8_REG	(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0x47)

#define ICM456X_IPREG_SYS1_REG_166_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0xA6)
#define ICM456X_IPREG_SYS1_REG_166_GYRO_SRC_CTRL_MASK					(3<<5)
#define ICM456X_IPREG_SYS1_REG_166_GYRO_SRC_CTRL_INTERPOL_OFF_FIR_OFF	(0<<5)
#define ICM456X_IPREG_SYS1_REG_166_GYRO_SRC_CTRL_INTERPOL_OFF_FIR_ON	(1<<5)
#define ICM456X_IPREG_SYS1_REG_166_GYRO_SRC_CTRL_INTERPOL_ON_FIR_ON		(2<<5)

#define ICM456X_IPREG_SYS1_REG_168_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0xA8)
#define ICM456X_IPREG_SYS1_REG_168_GYRO_OIS_M6_BYP_EN					(1<<1)

#define ICM456X_IPREG_SYS1_REG_170_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0xAA)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_SEL_MASK					(0xF<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_1X						(0<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_2X						(1<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_4X						(2<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_5X						(3<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_7X						(4<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_8X						(5<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_10X						(6<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_11X						(7<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_16X						(8<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_18X						(9<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_20X						(0xA<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_32X						(0xB<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_LP_AVG_64X						(0xC<<1)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_OIS_HPFBW_SEL_MASK				(7<<5)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_OIS_HPFBW_BYPASS				(0<<5)
#define ICM456X_IPREG_SYS1_REG_170_GYRO_OIS_HPFBW_0_25HZ				(2<<5)	//!< 0.25Hz
#define ICM456X_IPREG_SYS1_REG_170_GYRO_OIS_HPFBW_0_062HZ				(3<<5)	//!< 0.062Hz
#define ICM456X_IPREG_SYS1_REG_170_GYRO_OIS_HPFBW_0_016HZ				(4<<5)	//!< 0.016Hz

#define ICM456X_IPREG_SYS1_REG_171_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0xAB)
#define ICM456X_IPREG_SYS1_REG_171_GYRO_OIS_LPF1BW_SEL_MASK				(7<<0)
#define ICM456X_IPREG_SYS1_REG_171_GYRO_OIS_LPF1BW_BYPASS				(0<<0)
#define ICM456X_IPREG_SYS1_REG_171_GYRO_OIS_LPF1BW_1100HZ				(1<<0)
#define ICM456X_IPREG_SYS1_REG_171_GYRO_OIS_LPF1BW_900HZ				(2<<0)
#define ICM456X_IPREG_SYS1_REG_171_GYRO_OIS_LPF1BW_600HZ				(3<<0)
#define ICM456X_IPREG_SYS1_REG_171_GYRO_OIS_LPF1BW_285HZ				(4<<0)
#define ICM456X_IPREG_SYS1_REG_171_GYRO_OIS_LPF1BW_139HZ				(5<<0)
#define ICM456X_IPREG_SYS1_REG_171_GYRO_OIS_LPF1BW_65HZ					(6<<0)

#define ICM456X_IPREG_SYS1_REG_172_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS1 | 0xAC)
#define ICM456X_IPREG_SYS1_REG_172_GYRO_UI_LPFBW_SEL_MASK				(7<<0)
#define ICM456X_IPREG_SYS1_REG_172_GYRO_UI_LPFBW_BYPASS					(0<<0)
#define ICM456X_IPREG_SYS1_REG_172_GYRO_UI_LPFBW_ODR_DIV4				(1<<0)
#define ICM456X_IPREG_SYS1_REG_172_GYRO_UI_LPFBW_ODR_DIV8				(2<<0)
#define ICM456X_IPREG_SYS1_REG_172_GYRO_UI_LPFBW_ODR_DIV16				(3<<0)
#define ICM456X_IPREG_SYS1_REG_172_GYRO_UI_LPFBW_ODR_DIV32				(4<<0)
#define ICM456X_IPREG_SYS1_REG_172_GYRO_UI_LPFBW_ODR_DIV64				(5<<0)
#define ICM456X_IPREG_SYS1_REG_172_GYRO_UI_LPFBW_ODR_DIV128				(6<<0)
#define ICM456X_IPREG_SYS1_REG_172_GYRO_OIS_HPF1_BYP 					(1<<7)


// 22 USER BANK IPREG_SYS2 REGISTER MAP

#define ICM456X_IPREG_SYS2_REG_ACCEL_X_OFFUSER_7_0_REG		(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x18)
#define ICM456X_IPREG_SYS2_REG_ACCEL_X_OFFUSER_13_8_REG		(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x19)
#define ICM456X_IPREG_SYS2_REG_ACCEL_Y_OFFUSER_7_0_REG		(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x20)
#define ICM456X_IPREG_SYS2_REG_ACCEL_Y_OFFUSER_13_8_REG		(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x21)
#define ICM456X_IPREG_SYS2_REG_ACCEL_Z_OFFUSER_7_0_REG		(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x28)
#define ICM456X_IPREG_SYS2_REG_ACCEL_Z_OFFUSER_13_8_REG		(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x29)

#define ICM456X_IPREG_SYS2_REG_123_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x7B)
#define ICM456X_IPREG_SYS2_REG_123_ACCEL_SRC_CTRL_MASK					(3<<0)
#define ICM456X_IPREG_SYS2_REG_123_ACCE_SRC_CTRL_INTERPOL_OFF_FIR_OFF	(0<<0)
#define ICM456X_IPREG_SYS2_REG_123_ACCE_SRC_CTRL_INTERPOL_OFF_FIR_ON	(1<<0)
#define ICM456X_IPREG_SYS2_REG_123_ACCE_SRC_CTRL_INTERPOL_ON_FIR_ON		(2<<0)

#define ICM456X_IPREG_SYS2_REG_129_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x81)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_SEL_MASK				(0xF<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_1X						(0<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_2X						(1<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_4X						(2<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_5X						(3<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_7X						(4<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_8X						(5<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_10X					(6<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_11X					(7<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_16X					(8<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_18X					(9<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_20X					(0xA<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_32X					(0xB<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_LP_AVG_64X					(0xC<<1)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_OIS_HPFBW_SEL_MASK			(7<<4)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_OIS_HPFBW_BYPASS				(0<<4)
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_OIS_HPFBW_0_25HZ				(2<<4)	//!< 0.25Hz
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_OIS_HPFBW_0_062HZ				(3<<4)	//!< 0.062Hz
#define ICM456X_IPREG_SYS2_REG_129_ACCEEL_OIS_HPFBW_0_016HZ				(4<<4)	//!< 0.016Hz

#define ICM456X_IPREG_SYS2_REG_130_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x82)
#define ICM456X_IPREG_SYS2_REG_130_ACCEL_OIS_LPF1BW_SEL_MASK			(7<<0)
#define ICM456X_IPREG_SYS2_REG_130_ACCEL_OIS_LPF1BW_BYPASS				(0<<0)
#define ICM456X_IPREG_SYS2_REG_130_ACCEL_OIS_LPF1BW_1100HZ				(1<<0)
#define ICM456X_IPREG_SYS2_REG_130_ACCEL_OIS_LPF1BW_900HZ				(2<<0)
#define ICM456X_IPREG_SYS2_REG_130_ACCEL_OIS_LPF1BW_600HZ				(3<<0)
#define ICM456X_IPREG_SYS2_REG_130_ACCEL_OIS_LPF1BW_285HZ				(4<<0)
#define ICM456X_IPREG_SYS2_REG_130_ACCEL_OIS_LPF1BW_139HZ				(5<<0)
#define ICM456X_IPREG_SYS2_REG_130_ACCEL_OIS_LPF1BW_65HZ				(6<<0)

#define ICM456X_IPREG_SYS2_REG_131_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x83)
#define ICM456X_IPREG_SYS2_REG_131_ACCEL_UI_LPFBW_SEL_MASK				(7<<0)
#define ICM456X_IPREG_SYS2_REG_131_ACCEL_UI_LPFBW_BYPASS				(0<<0)
#define ICM456X_IPREG_SYS2_REG_131_ACCEL_UI_LPFBW_ODR_DIV4				(1<<0)
#define ICM456X_IPREG_SYS2_REG_131_ACCEL_UI_LPFBW_ODR_DIV8				(2<<0)
#define ICM456X_IPREG_SYS2_REG_131_ACCEL_UI_LPFBW_ODR_DIV16				(3<<0)
#define ICM456X_IPREG_SYS2_REG_131_ACCEL_UI_LPFBW_ODR_DIV32				(4<<0)
#define ICM456X_IPREG_SYS2_REG_131_ACCEL_UI_LPFBW_ODR_DIV64				(5<<0)
#define ICM456X_IPREG_SYS2_REG_131_ACCEL_UI_LPFBW_ODR_DIV128			(6<<0)

#define ICM456X_IPREG_SYS2_REG_132_REG						(ICM456X_BASE_ADDRESS_IPREG_SYS2 | 0x84)
#define ICM456X_IPREG_SYS2_REG_132_ACCEL_OIS_HPF1_BYP 					(1<<0)
#define ICM456X_IPREG_SYS2_REG_132_ACCEL_OIS_M6_BYP						(1<<2)

#define ICM456X_ADC_RANGE						0x7FFF		// 16 Bits

#define ICM456X_ACCEL_IDX			0
#define ICM456X_GYRO_IDX			1
#define ICM456X_TEMP_IDX			2
#define ICM456X_NB_SENSOR			3

#define ICM456X_FIFO_SIZE			2048


#pragma pack(push, 1)

#define ICM456X_FIFO_HDR_GYRO_ODR_CHANGED								(1<<0)
#define ICM456X_FIFO_HDR_ACCEL_ODR_CHANGED								(1<<1)
#define ICM456X_FIFO_HDR_FSYNC_TRIGGED									(1<<2)
#define ICM456X_FIFO_HDR_TIMESTAMP_DATA									(1<<3)
#define ICM456X_FIFO_HDR_HIRES_EN										(1<<4)
#define ICM456X_FIFO_HDR_GYRO_EN										(1<<5)
#define ICM456X_FIFO_HDR_ACCEL_EN										(1<<6)
#define ICM456X_FIFO_HDR_EXT_HDR_DATA									(1<<7)

typedef struct __ICM456X_Fifo_Hdr {
	uint8_t GyroOdrChg:1;			//!< 1 - Different ODR from previous
	uint8_t AccelOdrChg:1;
	uint8_t FSyncTrig:1;
	uint8_t Timestamp:1;
	uint8_t HiresEn:1;
	uint8_t GyroEn:1;
	uint8_t AccelEn:1;
	uint8_t ExtHdr:1;				//!< 1 - extended header byte2
} Icm45686FifoHdr_t;

#define ICM456X_FIFO_EXTHDR_ES0_EN										(1<<0)
#define ICM456X_FIFO_EXTHDR_ES1_EN										(1<<1)
#define ICM456X_FIFO_EXTHDR_ES0_DATA_VALID								(1<<2)
#define ICM456X_FIFO_EXTHDR_ES1_DATA_VALID								(1<<3)
#define ICM456X_FIFO_EXTHDR_ES0_9BYTES									(1<<4)

typedef struct __ICM456X_Fifo_ExtHdr {
	uint8_t Es0En:1;				//!< 1 - Different ODR from previous
	uint8_t Es1En:1;
	uint8_t Es0DataValid:1;
	uint8_t Es01ataValid:1;
	uint8_t Es99Bytes:1;
} Icm45686FifoRExtHdr_t;

#pragma pack(pop)

#ifdef __cplusplus

class AccelIcm456x : public AccelSensor {
public:
	virtual bool Init(const AccelSensorCfg_t &Cfg, DeviceIntrf * const pIntrf, Timer * const pTimer = NULL);
	virtual uint32_t SamplingFrequency(uint32_t Freq);
	virtual uint8_t Scale(uint8_t Value);

	/**
	 * @brief	Set and enable filter cutoff frequency
	 *
	 * Optional implementation can override this to implement filtering supported by the device
	 *
	 * @param	Freq : Filter frequency in mHz
	 *
	 * @return	Actual frequency in mHz
	 */
	virtual uint32_t FilterFreq(uint32_t Freq);
	virtual bool Enable();
	virtual void Disable();

private:
	virtual bool Init(uint32_t DevAddr, DeviceIntrf * const pIntrf, uint8_t Inter = 0, DEVINTR_POL Pol = DEVINTR_POL_LOW, Timer * const pTimer = NULL) = 0;
};

class GyroIcm456x : public GyroSensor {
public:
	virtual bool Init(const GyroSensorCfg_t &Cfg, DeviceIntrf * const pIntrf, Timer * const pTimer = NULL);
	virtual uint32_t SamplingFrequency(uint32_t Freq);
	virtual uint32_t Sensitivity(uint32_t Value);

	/**
	 * @brief	Set and enable filter cutoff frequency
	 *
	 * Optional implementation can override this to implement filtering supported by the device
	 *
	 * @param	Freq : Filter frequency in mHz
	 *
	 * @return	Actual frequency in mHz
	 */
	virtual uint32_t FilterFreq(uint32_t Freq);
	virtual bool Enable();
	virtual void Disable();
	virtual void Reset() {}

private:
	virtual bool Init(uint32_t DevAddr, DeviceIntrf * const pIntrf, uint8_t Inter = 0, DEVINTR_POL Pol = DEVINTR_POL_LOW, Timer * const pTimer = NULL) = 0;
};

class TempIcm456x : public TempSensor {
public:
	/**
	 * @brief	Initialize sensor (require implementation).
	 *
	 * @param 	CfgData : Reference to configuration data
	 * @param	pIntrf 	: Pointer to interface to the sensor.
	 * 					  This pointer will be kept internally
	 * 					  for all access to device.
	 * 					  DONOT delete this object externally
	 * @param	pTimer	: Pointer to timer for retrieval of time stamp
	 * 					  This pointer will be kept internally
	 * 					  for all access to device.
	 * 					  DONOT delete this object externally
	 *
	 * @return
	 * 			- true	: Success
	 * 			- false	: Failed
	 */
	virtual bool Init(const TempSensorCfg_t &CfgData, DeviceIntrf * const pIntrf = NULL, Timer * const pTimer = NULL);
	/**
	 * @brief	Power on or wake up device
	 *
	 * @return	true - If success
	 */
	virtual bool Enable();

	/**
	 * @brief	Put device in power down or power saving sleep mode
	 *
	 * @return	None
	 */
	virtual void Disable();

private:
	virtual bool Init(uint32_t DevAddr, DeviceIntrf * const pIntrf, uint8_t Inter = 0, DEVINTR_POL Pol = DEVINTR_POL_LOW, Timer * const pTimer = NULL) = 0;
};

class AgIcm456x : public AccelIcm456x, public GyroIcm456x, public TempIcm456x {
	friend class ImuIcm20948;
	friend class AccelIcm20948;
	friend class GyroIcm20948;
	friend class MagIcm20948;

public:

	AgIcm456x();

	/**
	 * @brief	Initialize accelerometer sensor.
	 *
	 * NOTE: This sensor must be the first to be initialized.
	 *
	 * @param 	Cfg		: Accelerometer configuration data
	 * @param 	pIntrf	: Pointer to communication interface
	 * @param 	pTimer	: Pointer to Timer use for time stamp
	 *
	 * @return	true - Success
	 */
	virtual bool Init(const AccelSensorCfg_t &Cfg, DeviceIntrf * const pIntrf, Timer * const pTimer = NULL) {
		vbSensorEnabled[ICM456X_ACCEL_IDX] = AccelIcm456x::Init(Cfg, pIntrf, pTimer);
		return vbSensorEnabled[ICM456X_ACCEL_IDX];
	}

	/**
	 * @brief	Initialize gyroscope sensor.
	 *
	 * NOTE : Accelerometer must be initialized first prior to this one.
	 *
	 * @param 	Cfg		: Accelerometer configuration data
	 * @param 	pIntrf	: Pointer to communication interface
	 * @param 	pTimer	: Pointer to Timer use for time stamp
	 *
	 * @return	true - Success
	 */
	virtual bool Init(const GyroSensorCfg_t &Cfg, DeviceIntrf * const pIntrf, Timer * const pTimer = NULL) {
		vbSensorEnabled[ICM456X_GYRO_IDX] = GyroIcm456x::Init(Cfg, pIntrf, pTimer);
		return vbSensorEnabled[ICM456X_GYRO_IDX];
	}

	virtual bool Init(const TempSensorCfg_t &Cfg, DeviceIntrf * const pIntrf = NULL, Timer * const pTimer = NULL) {
		vbSensorEnabled[ICM456X_TEMP_IDX] = TempIcm456x::Init(Cfg, pIntrf, pTimer);
		return vbSensorEnabled[ICM456X_TEMP_IDX];
	}

	virtual bool Enable();
	virtual void Disable();
	virtual void Reset();
	virtual bool Read(AccelSensorRawData_t &Data) { return AccelSensor::Read(Data); }
	virtual bool Read(AccelSensorData_t &Data) { return AccelSensor::Read(Data); }
	virtual bool Read(GyroSensorRawData_t &Data) { return GyroSensor::Read(Data); }
	virtual bool Read(GyroSensorData_t &Data) { return GyroSensor::Read(Data); }

	// Indirect read/write

	/**
	 * @brief	Indirect read from mem or register
	 *
	 * @param	IRegAddr	: 16bits Reg/Mem address
	 * @param	pBuff		: Pointer to receive buffer
	 * @param	BuffLen		: Receive buffer length
	 *
	 * @return	Number of bytes read
	 */
	int Read(uint16_t IRegAddr, uint8_t *pBuff, int BuffLen);

	/**
	 * @brief	Indirect write to mem or register
	 *
	 * @param	IRegAddr	: 16bits Reg/Mem address
	 * @param	pData		: Pointer to data to write
	 * @param	DataLen		: Data length
	 *
	 * @return	Number of bytes written
	 */
	int Write(uint16_t IRegAddr, uint8_t *pData, int DataLen);

	virtual void IntHandler();
	virtual bool StartSampling() { return true; }

	bool UpdateData();
protected:
	virtual bool Init(uint32_t DevAddr, DeviceIntrf * const pIntrf, Timer * const pTimer = NULL);

	//int Read(uint8_t *pCmdAddr, int CmdAddrLen, uint8_t *pBuff, int BuffLen);
	int Write(uint8_t *pCmdAddr, int CmdAddrLen, uint8_t *pData, int DataLen) {
		return Device::Write(pCmdAddr, CmdAddrLen, pData, DataLen);
	}

	bool vbInitialized;
	bool vbSensorEnabled[ICM456X_NB_SENSOR];

private:
	AgIcm456x(const AgIcm456x&); // no copy constructor

	// Default base initialization. Does detection and set default config for all sensor.
	// All sensor init must call this first prio to initializing itself
	/**
	 * @brief	Initialize sensor (require implementation).
	 *
	 * @param 	Cfg 	: Reference to configuration data
	 * @param	pIntrf 	: Pointer to interface to the sensor.
	 * 					  This pointer will be kept internally
	 * 					  for all access to device.
	 * 					  DONOT delete this object externally
	 * @param	pTimer	: Pointer to timer for retrieval of time stamp
	 * 					  This pointer will be kept internally
	 * 					  for all access to device.
	 * 					  DONOT delete this object externally
	 *
	 * @return
	 * 			- true	: Success
	 * 			- false	: Failed
	 */
	bool Init(uint32_t DevAddr, DeviceIntrf * const pIntrf, uint8_t Inter = 0, DEVINTR_POL Pol = DEVINTR_POL_LOW, Timer * const pTimer = NULL);
	//bool SelectBank(uint8_t BankNo);

	//virtual uint8_t FifoDataFlag() { return vFifoDataFlag; }
	//virtual void FifoDataFlagSet(uint8_t Flag);//  { vFifoDataFlag = (vFifoDataFlag & ~Flag) | Flag; }
	//virtual void FifoDataFlagClr(uint8_t Flag);//  { vFifoDataFlag = (vFifoDataFlag & ~Flag); }

	//uint8_t vFifoDataFlag;	// Fifo frame is dependent on enabled features
	//size_t vFifoFrameSize;	// Data word count
	uint16_t vPrevTime;
	uint64_t vRollover;
	SENSOR_TYPE vType;	//!< Bit field indicating the sensors contain within
};

#endif // __cplusplus

/** @} End of group Sensors */

#endif	// __AG_ICM456X_H__
